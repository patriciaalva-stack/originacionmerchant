<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merchant Products - Casos de Uso y Flowchart</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .section {
            margin-bottom: 40px;
        }

        h2 {
            color: #3498db;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        h3 {
            color: #e74c3c;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .product-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-card.legacy {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .product-card.new {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .product-card h4 {
            font-size: 1.2em;
            margin-bottom: 10px;
            border-bottom: 2px solid rgba(255,255,255,0.3);
            padding-bottom: 5px;
        }

        .use-case {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }

        .use-case-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .scenario {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .scenario strong {
            color: #e74c3c;
        }

        .rules {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .rules h3 {
            color: #856404;
            margin-top: 0;
        }

        .rule-item {
            padding: 10px;
            margin: 10px 0;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }

        .flowchart-container {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-top: 30px;
            overflow-x: auto;
        }

        .mermaid {
            text-align: center;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-box {
            width: 30px;
            height: 30px;
            border-radius: 5px;
        }

        .legend-box.legacy {
            background: #f5576c;
        }

        .legend-box.new {
            background: #00f2fe;
        }

        .legend-box.compatible {
            background: #2ecc71;
        }

        .legend-box.incompatible {
            background: #e74c3c;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            background: #ecf0f1;
            border: none;
            border-radius: 8px 8px 0 0;
            font-size: 1.1em;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .tab:hover {
            background: #d5dbdb;
        }

        .tab.active {
            background: #3498db;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }

        .btn-primary {
            background: #3498db;
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-success {
            background: #2ecc71;
        }

        .btn-success:hover {
            background: #27ae60;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
        }

        th, td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }

        th {
            background: #007bff;
            color: white;
        }

        tr:hover {
            background: #f8f9fa;
        }

        @media print {
            body {
                background: white;
            }
            .container {
                box-shadow: none;
            }
            .tabs, .button-group {
                display: none;
            }
            .tab-content {
                display: block !important;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè¶ Merchant Products</h1>
        <p class="subtitle">Casos de Uso y Flowchart de Convivencia de Productos</p>

        <div class="tabs">
            <button class="tab active" onclick="showTab('overview', this)">üìä Overview</button>
            <button class="tab" onclick="showTab('rules', this)">‚ö†Ô∏è Reglas de Convivencia</button>
            <button class="tab" onclick="showTab('flowchart', this)">üîÄ Flowchart</button>
            <button class="tab" onclick="showTab('usecases', this)">üìù Casos de Uso</button>
        </div>

        <!-- TAB 1: OVERVIEW -->
        <div id="overview" class="tab-content active">
            <div class="section">
                <h2>Productos Legacy</h2>
                <div class="products-grid">
                    <div class="product-card legacy">
                        <h4>üí∞ Pr√©stamo en Cuotas Fijas</h4>
                        <p>Pr√©stamo tradicional con cuotas fijas mensuales. Es excluyente con PPV.</p>
                    </div>
                    <div class="product-card legacy">
                        <h4>‚ö° Dinero Express</h4>
                        <p>Adelanto r√°pido de dinero. Puede convivir con la mayor√≠a de productos.</p>
                    </div>
                    <div class="product-card legacy">
                        <h4>üìà Pr√©stamo por Porcentaje de Ventas (PPV)</h4>
                        <p><strong>Solo Brasil.</strong> Se descuenta un porcentaje de ventas. Es excluyente con Cuotas Fijas, LC Fondeo y LC Full.</p>
                    </div>
                    <div class="product-card legacy">
                        <h4>üíµ Adelanto de Dinero</h4>
                        <p>Adelanto sobre ventas futuras. Compatible con todos los productos.</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>Nuevos Productos</h2>
                <div class="products-grid">
                    <div class="product-card new">
                        <h4>üè¶ L√≠nea de Cr√©dito</h4>
                        <p><strong>3 tipos</strong> (el merchant puede tener solo uno de estos tipos):</p>
                        <ul style="margin-top: 10px; margin-left: 20px;">
                            <li><strong>Fondeo:</strong> Reemplaza CF como producto de fondeo del negocio</li>
                            <li><strong>Consumo:</strong> BNPL (compras en ML y pagos en MP)</li>
                            <li><strong>Full:</strong> Fondeo + Consumo</li>
                        </ul>
                        <p style="margin-top: 10px;">‚úÖ Se puede activar con CF o Dinero Express activos</p>
                        <p style="margin-top: 5px;">‚ö†Ô∏è Si hay CF activo al encender Fondeo, <strong>ambos corren simult√°neamente</strong>: el CF Legacy se liquida seg√∫n sus t√©rminos y el siguiente pr√©stamo de fondeo ya es L√≠nea</p>
                        <p style="margin-top: 5px;">‚ùå LC Fondeo y Full son incompatibles con PPV</p>
                    </div>
                    <div class="product-card new">
                        <h4>üáßüá∑ Pr√©stamo FGBS</h4>
                        <p>Pr√©stamo garantizado por el gobierno brasile√±o.</p>
                        <p style="margin-top: 10px;">‚úÖ Puede convivir con PPV y Dinero Express</p>
                    </div>
                </div>
            </div>

            <div class="legend">
                <div class="legend-item">
                    <div class="legend-box legacy"></div>
                    <span>Producto Legacy</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box new"></div>
                    <span>Producto Nuevo</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box compatible"></div>
                    <span>Compatible</span>
                </div>
                <div class="legend-item">
                    <div class="legend-box incompatible"></div>
                    <span>Incompatible</span>
                </div>
            </div>
        </div>

        <!-- TAB 2: REGLAS DE CONVIVENCIA -->
        <div id="rules" class="tab-content">
            <div class="section">
                <h2>Reglas de Convivencia y Restricciones</h2>

                <div class="rules">
                    <h3>üö´ Reglas de Exclusi√≥n</h3>
                    <div class="rule-item">
                        <strong>Regla 1:</strong> Cuotas Fijas y PPV son EXCLUYENTES<br>
                        <em>Si un merchant tiene uno, no puede tener el otro simult√°neamente.</em>
                    </div>
                    <div class="rule-item">
                        <strong>Regla 2:</strong> LC Fondeo y CF Legacy pueden correr simult√°neamente<br>
                        <em>El merchant puede solicitar LC Fondeo mientras tiene un CF activo. Ambos pr√©stamos corren al mismo tiempo: el CF Legacy se liquida seg√∫n sus t√©rminos originales y el siguiente pr√©stamo de fondeo ya se emite como L√≠nea. No hay sustituci√≥n inmediata.</em>
                    </div>
                    <div class="rule-item">
                        <strong>Regla 3:</strong> PPV solo est√° disponible en Brasil<br>
                        <em>Este producto es exclusivo para merchants brasile√±os.</em>
                    </div>
                    <div class="rule-item">
                        <strong>Regla 4:</strong> FGBS solo est√° disponible en Brasil<br>
                        <em>Pr√©stamo garantizado por gobierno, exclusivo de Brasil.</em>
                    </div>
                    <div class="rule-item">
                        <strong>Regla 5:</strong> L√≠nea de Cr√©dito Fondeo y Full excluyen a PPV<br>
                        <em>Un merchant con PPV activo no puede activar LC Fondeo ni LC Full. Sin embargo, s√≠ puede activar LC Consumo, ya que no compite con el mecanismo de fondeo del negocio.</em>
                    </div>
                </div>

                <div class="rules" style="background: #d4edda; border-color: #28a745;">
                    <h3 style="color: #155724;">‚úÖ Reglas de Compatibilidad</h3>
                    <div class="rule-item">
                        <strong>Compatible 1:</strong> Dinero Express convive con casi todos los productos<br>
                        <em>Es el producto m√°s flexible del portafolio.</em>
                    </div>
                    <div class="rule-item">
                        <strong>Compatible 2:</strong> PPV y FGBS pueden convivir<br>
                        <em>Son productos diferentes y complementarios.</em>
                    </div>
                    <div class="rule-item">
                        <strong>Compatible 3:</strong> Adelanto de Dinero convive con todos<br>
                        <em>No tiene restricciones de convivencia.</em>
                    </div>
                    <div class="rule-item">
                        <strong>Compatible 4:</strong> L√≠nea de Cr√©dito puede activarse con CF o DE activos<br>
                        <em>No es necesario cancelar CF para solicitar LC Fondeo. Ambos corren simult√°neamente: el CF Legacy sigue con sus t√©rminos y el nuevo pr√©stamo de fondeo ya se emite como L√≠nea.</em>
                    </div>
                    <div class="rule-item">
                        <strong>Compatible 5:</strong> PPV y LC Consumo pueden convivir<br>
                        <em>LC Consumo (gastos personales) no interfiere con el mecanismo de descuento por ventas de PPV.</em>
                    </div>
                </div>

                <div class="rules" style="background: #cce5ff; border-color: #004085;">
                    <h3 style="color: #004085;">üìä Tabla de Compatibilidad</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Producto Base</th>
                                <th>Cuotas Fijas</th>
                                <th>PPV</th>
                                <th>Dinero Express</th>
                                <th>LC Fondeo / Full</th>
                                <th>LC Consumo</th>
                                <th>FGBS</th>
                                <th>Adelanto</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="font-weight: bold;">Cuotas Fijas</td>
                                <td style="text-align: center;">-</td>
                                <td style="text-align: center;">‚ùå</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚ö†Ô∏è</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">PPV (Brasil)</td>
                                <td style="text-align: center;">‚ùå</td>
                                <td style="text-align: center;">-</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚ùå</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">Dinero Express</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">-</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">LC Fondeo / Full</td>
                                <td style="text-align: center;">‚ö†Ô∏è</td>
                                <td style="text-align: center;">‚ùå</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">-</td>
                                <td style="text-align: center;">-</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">LC Consumo</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">-</td>
                                <td style="text-align: center;">-</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">FGBS (Brasil)</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">-</td>
                                <td style="text-align: center;">‚úÖ</td>
                            </tr>
                            <tr>
                                <td style="font-weight: bold;">Adelanto Dinero</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">‚úÖ</td>
                                <td style="text-align: center;">-</td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 5px;">
                        <strong>Leyenda:</strong><br>
                        ‚úÖ Compatible (pueden convivir)<br>
                        ‚ùå Incompatible (excluyentes)<br>
                        ‚ö†Ô∏è CF Legacy y LC Fondeo corren simult√°neamente; el siguiente pr√©stamo de fondeo ya se emite como L√≠nea<br>
                        - Misma familia de producto (no aplica)
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 3: FLOWCHART -->
        <div id="flowchart" class="tab-content">
            <div class="section">
                <h2>Flowchart de Convivencia de Productos</h2>
                <p style="text-align: center; color: #7f8c8d; margin-bottom: 20px;">
                    √Årbol de decisi√≥n para validar si un producto puede activarse seg√∫n los productos activos del merchant
                </p>

                <div class="flowchart-container">
                    <div class="mermaid">
graph TD
    Inicio([Merchant: Solicitar nuevo producto]) --> TieneActivos{Tiene productos activos?}

    TieneActivos -->|No| Libre[Sin restricciones - cualquier producto disponible]
    TieneActivos -->|Si| QueProd{Que producto quiere solicitar?}

    QueProd --> TryLC[Linea de Credito]
    QueProd --> TryCF[Cuotas Fijas]
    QueProd --> TryPPV[PPV - Solo Brasil]
    QueProd --> TryLibre[DE / Adelanto / FGBS]

    TryLibre --> AprobLibre[Aprobado - sin restricciones de convivencia]

    TryCF --> PpvCheckCF{Tiene PPV activo?}
    PpvCheckCF -->|Si| BloqCF[Bloqueado - CF y PPV son excluyentes]
    PpvCheckCF -->|No| AprobCF[Aprobado - CF activada]

    TryPPV --> CfLcCheck{Tiene CF o LC Fondeo activo?}
    CfLcCheck -->|Si| BloqPPV[Bloqueado - CF y LC Fondeo excluyen PPV]
    CfLcCheck -->|No| AprobPPV[Aprobado - PPV activado]

    TryLC --> ModalidadLC{Modalidad de Linea}
    ModalidadLC --> Fondeo[Fondeo]
    ModalidadLC --> Consumo[Consumo]
    ModalidadLC --> Full[Full]

    Consumo --> AprobConsumo[Aprobado - LC Consumo compatible con todos]

    Fondeo --> PpvCheckF{Tiene PPV activo?}
    PpvCheckF -->|Si| BloqFondeo[Bloqueado - PPV excluye LC Fondeo]
    PpvCheckF -->|No| CfCheckF{Tiene CF Legacy activo?}
    CfCheckF -->|Si| CFLegacy[Aprobado - CF Legacy y LC Fondeo corren simultaneamente]
    CfCheckF -->|No| AprobFondeo[Aprobado - LC Fondeo activada]

    Full --> PpvCheckFu{Tiene PPV activo?}
    PpvCheckFu -->|Si| BloqFull[Bloqueado - PPV excluye LC Full]
    PpvCheckFu -->|No| AprobFull[Aprobado - LC Full activada]

    style Inicio fill:#667eea,color:#fff
    style Libre fill:#2ecc71,color:#fff
    style AprobLibre fill:#2ecc71,color:#fff
    style AprobCF fill:#2ecc71,color:#fff
    style AprobPPV fill:#2ecc71,color:#fff
    style AprobConsumo fill:#2ecc71,color:#fff
    style CFLegacy fill:#f39c12,color:#fff
    style AprobFondeo fill:#2ecc71,color:#fff
    style AprobFull fill:#2ecc71,color:#fff
    style BloqCF fill:#e74c3c,color:#fff
    style BloqPPV fill:#e74c3c,color:#fff
    style BloqFondeo fill:#e74c3c,color:#fff
    style BloqFull fill:#e74c3c,color:#fff
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; text-align: center;">
                    <strong>Colores:</strong> &nbsp;
                    <span style="background:#2ecc71;color:white;padding:4px 10px;border-radius:4px;margin:0 5px;">Aprobado</span>
                    <span style="background:#f39c12;color:white;padding:4px 10px;border-radius:4px;margin:0 5px;">Aprobado con condici√≥n Legacy</span>
                    <span style="background:#e74c3c;color:white;padding:4px 10px;border-radius:4px;margin:0 5px;">Bloqueado</span>
                    <span style="background:#667eea;color:white;padding:4px 10px;border-radius:4px;margin:0 5px;">Inicio</span>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Imprimir Flowchart</button>
                    <button class="btn btn-success" onclick="copyDiagram()">üìã Copiar C√≥digo Mermaid</button>
                </div>
            </div>
        </div>

        <!-- TAB 4: CASOS DE USO -->
        <div id="usecases" class="tab-content">
            <div class="section">
                <h2>Casos de Uso Detallados</h2>

                <div class="use-case">
                    <div class="use-case-title">üìã Caso 1: Merchant con Cuotas Fijas Activo</div>
                    <div class="scenario">
                        <strong>Estado Inicial:</strong> Merchant tiene un Pr√©stamo en Cuotas Fijas activo<br><br>
                        <strong>Opciones Disponibles:</strong>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>‚úÖ Puede activar L√≠nea de Cr√©dito Fondeo (CF Legacy permanece hasta liquidarse)</li>
                            <li>‚úÖ Puede solicitar Dinero Express (convivencia permitida)</li>
                            <li>‚úÖ Puede solicitar Adelanto de Dinero</li>
                            <li>‚ùå NO puede tener PPV (excluyente)</li>
                        </ul><br>
                        <strong>Resultado:</strong> Ambos pr√©stamos corren simult√°neamente: el CF Legacy se liquida seg√∫n sus t√©rminos y el nuevo LC Fondeo ya est√° activo. El siguiente pr√©stamo de fondeo se emitir√° como L√≠nea, no como un nuevo CF.
                    </div>
                </div>

                <div class="use-case">
                    <div class="use-case-title">üìã Caso 2: Merchant en Brasil con PPV</div>
                    <div class="scenario">
                        <strong>Estado Inicial:</strong> Merchant brasile√±o con PPV activo<br><br>
                        <strong>Opciones Disponibles:</strong>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>‚úÖ Puede solicitar Pr√©stamo FGBS (convivencia permitida)</li>
                            <li>‚úÖ Puede solicitar Dinero Express</li>
                            <li>‚úÖ Puede solicitar Adelanto de Dinero</li>
                            <li>‚úÖ Puede activar L√≠nea de Cr√©dito Consumo (convivencia permitida)</li>
                            <li>‚ùå NO puede tener Cuotas Fijas (excluyente)</li>
                            <li>‚ùå NO puede activar L√≠nea de Cr√©dito Fondeo ni Full (PPV excluye el componente de fondeo)</li>
                        </ul><br>
                        <strong>Resultado:</strong> Puede tener m√∫ltiples productos activos simult√°neamente, incluyendo LC Consumo para gastos personales.
                    </div>
                </div>

                <div class="use-case">
                    <div class="use-case-title">üìã Caso 3: Merchant con Dinero Express</div>
                    <div class="scenario">
                        <strong>Estado Inicial:</strong> Merchant con Dinero Express activo<br><br>
                        <strong>Opciones Disponibles:</strong>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>‚úÖ Puede activar L√≠nea de Cr√©dito (cualquier modalidad)</li>
                            <li>‚úÖ Puede solicitar Cuotas Fijas</li>
                            <li>‚úÖ Puede solicitar PPV (solo Brasil)</li>
                            <li>‚úÖ Puede solicitar FGBS (solo Brasil)</li>
                            <li>‚úÖ Puede solicitar Adelanto de Dinero</li>
                        </ul><br>
                        <strong>Resultado:</strong> Dinero Express es el producto m√°s flexible, convive con casi todos.
                    </div>
                </div>

                <div class="use-case">
                    <div class="use-case-title">üìã Caso 4: Merchant sin Productos Activos</div>
                    <div class="scenario">
                        <strong>Estado Inicial:</strong> Merchant nuevo sin productos financieros<br><br>
                        <strong>Opciones Disponibles:</strong>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>‚úÖ Puede solicitar L√≠nea de Cr√©dito (Fondeo, Consumo o Full)</li>
                            <li>‚úÖ Puede solicitar Cuotas Fijas</li>
                            <li>‚úÖ Puede solicitar Dinero Express</li>
                            <li>‚úÖ Puede solicitar PPV (solo Brasil)</li>
                            <li>‚úÖ Puede solicitar FGBS (solo Brasil)</li>
                            <li>‚úÖ Puede solicitar Adelanto de Dinero</li>
                        </ul><br>
                        <strong>Recomendaci√≥n:</strong> Evaluar necesidad (fondeo vs consumo) y comenzar con L√≠nea de Cr√©dito Full para m√°xima flexibilidad.
                    </div>
                </div>

                <div class="use-case">
                    <div class="use-case-title">üìã Caso 5: Encendido de L√≠nea de Cr√©dito con CF activo</div>
                    <div class="scenario">
                        <strong>Estado Inicial:</strong> Merchant con Cuotas Fijas activo quiere pasar a L√≠nea<br><br>
                        <strong>Proceso:</strong>
                        <ol style="margin-left: 20px; margin-top: 10px;">
                            <li>Merchant solicita L√≠nea de Cr√©dito Fondeo</li>
                            <li>Sistema verifica elegibilidad (CF Legacy activo no bloquea la activaci√≥n)</li>
                            <li>Si aprueba, se emite el pr√©stamo LC Fondeo ‚Äî el CF Legacy no se cancela</li>
                            <li>Ambos pr√©stamos corren al mismo tiempo: CF Legacy sigue con sus t√©rminos originales</li>
                            <li>El siguiente pr√©stamo de fondeo se emite como L√≠nea, no como nuevo CF</li>
                        </ol><br>
                        <strong>Ventaja:</strong> Mayor flexibilidad de uso y puede agregar modalidad Consumo despu√©s para tener Full.
                    </div>
                </div>

                <div class="use-case">
                    <div class="use-case-title">üìã Caso 6: Merchant Brasile√±o con M√∫ltiples Productos</div>
                    <div class="scenario">
                        <strong>Escenario Complejo:</strong> Merchant en Brasil con estrategia multi-producto<br><br>
                        <strong>Combinaci√≥n Posible:</strong>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>‚úÖ PPV activo (para descuento por ventas)</li>
                            <li>‚úÖ FGBS activo (pr√©stamo garantizado)</li>
                            <li>‚úÖ Dinero Express (para emergencias)</li>
                            <li>‚úÖ Adelanto de Dinero (liquidez inmediata)</li>
                            <li>‚úÖ LC Consumo (gastos personales, compatible con PPV)</li>
                        </ul><br>
                        <strong>Restricci√≥n:</strong> No puede tener CF, LC Fondeo ni LC Full mientras tenga PPV activo (excluyen el mecanismo de cobro por ventas).
                    </div>
                </div>

                <div class="use-case">
                    <div class="use-case-title">üìã Caso 7: Convivencia PPV + L√≠nea de Cr√©dito Consumo</div>
                    <div class="scenario">
                        <strong>Estado Inicial:</strong> Merchant brasile√±o con PPV activo que necesita cr√©dito personal<br><br>
                        <strong>Proceso:</strong>
                        <ol style="margin-left: 20px; margin-top: 10px;">
                            <li>Merchant solicita L√≠nea de Cr√©dito modalidad Consumo</li>
                            <li>Sistema verifica: PPV no excluye LC Consumo (la exclusi√≥n aplica solo a Fondeo y Full)</li>
                            <li>Si aprueba, se activa LC Consumo</li>
                            <li>Ambos productos coexisten: PPV para fondeo del negocio, LC Consumo para gastos personales</li>
                        </ol><br>
                        <strong>Resultado:</strong> El merchant tiene PPV + LC Consumo activos simult√°neamente.<br><br>
                        <strong>Restricci√≥n:</strong> Si en el futuro quisiera cambiar a LC Fondeo o Full, primero deber√° cancelar el PPV.
                    </div>
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 2px solid #e2e8f0; color: #718096;">
            <p>üìÑ Documento actualizado: 2026-02-24 | Versi√≥n 4.0</p>
            <p>MercadoLibre - Merchant Credit Products</p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: false,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: false,
                curve: 'basis'
            }
        });

        let flowchartRendered = false;

        function showTab(tabName, btn) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            const tabButtons = document.querySelectorAll('.tab');
            tabButtons.forEach(button => button.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            btn.classList.add('active');

            if (tabName === 'flowchart' && !flowchartRendered) {
                flowchartRendered = true;
                setTimeout(() => {
                    mermaid.run({ nodes: document.querySelectorAll('.mermaid') });
                }, 100);
            }
        }

        function copyDiagram() {
            const diagramText = document.querySelector('.mermaid').textContent;
            navigator.clipboard.writeText(diagramText).then(() => {
                alert('‚úÖ C√≥digo Mermaid copiado al portapapeles!\n\nPuedes pegarlo en:\n- FigJam (con plugin Mermaid)\n- GitHub (markdown con ```mermaid)\n- Notion\n- Confluence');
            }).catch(err => {
                alert('Para copiar, selecciona el texto del diagrama manualmente.');
            });
        }

        const style = document.createElement('style');
        style.textContent = `
            @media print {
                body { background: white; }
                .container { box-shadow: none; }
                .tabs, .button-group { display: none; }
                .tab-content { display: block !important; page-break-inside: avoid; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
